"use strict";(self.webpackChunklightning_docs=self.webpackChunklightning_docs||[]).push([[888],{6979:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>c,toc:()=>h});var i=t(4848),r=t(8453),s=t(1470),o=t(9365);const a={sidebar_label:"Programming the autonomous routine",sidebar_position:3},l="Programming the autonomous routine",c={id:"Tutorials/Autonomous_Routines_examples",title:"Programming the autonomous routine",description:"In this tutorial, you will learn how to use different motion functions to program a competitive autonomous routine.",source:"@site/docs/Tutorials/Autonomous_Routines_examples.md",sourceDirName:"Tutorials",slug:"/Tutorials/Autonomous_Routines_examples",permalink:"/Lightninglib/docs/Tutorials/Autonomous_Routines_examples",draft:!1,unlisted:!1,editUrl:"https://github.com/HectorAlonso18/Lightninglib/tree/main/docs/Tutorials/Autonomous_Routines_examples.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_label:"Programming the autonomous routine",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Programming the Driver period",permalink:"/Lightninglib/docs/Tutorials/Driver_period_examples"},next:{title:"How to create tasks",permalink:"/Lightninglib/docs/Tutorials/Using_TaskManager_Class"}},d={},h=[{value:"Things to keep in mind",id:"things-to-keep-in-mind",level:2},{value:"Driving straight without PID",id:"driving-straight-without-pid",level:2},{value:"Driving straight using PID",id:"driving-straight-using-pid",level:2},{value:"Using the <code>drive_pid</code> and <code>turn_pid</code>",id:"using-the-drive_pid-and-turn_pid",level:3},{value:"Turning",id:"turning",level:2},{value:"Driving and turning example",id:"driving-and-turning-example",level:2},{value:"Swing turns",id:"swing-turns",level:2},{value:"Using Trapezoidal profile",id:"using-trapezoidal-profile",level:2},{value:"Driving to a point",id:"driving-to-a-point",level:2},{value:"Following a path",id:"following-a-path",level:2},{value:"Multitasking",id:"multitasking",level:3},{value:"Simple functions",id:"simple-functions",level:4},{value:"More complex functions",id:"more-complex-functions",level:4},{value:"Well, and how i can do the same \ud83e\udd14?",id:"well-and-how-i-can-do-the-same-",level:5},{value:"Congratulations! \ud83c\udf89",id:"congratulations-",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"programming-the-autonomous-routine",children:"Programming the autonomous routine"}),"\n",(0,i.jsx)(n.p,{children:"In this tutorial, you will learn how to use different motion functions to program a competitive autonomous routine."}),"\n",(0,i.jsx)(n.p,{children:"You can increase your knowledge by reading the Lightning documentation. However, it can be quite difficult to read the entire documentation without any hands-on programming. For this reason, it is recommended to follow the tutorials and gradually read the documentation as needed."}),"\n",(0,i.jsx)(n.h2,{id:"things-to-keep-in-mind",children:"Things to keep in mind"}),"\n",(0,i.jsxs)(n.p,{children:["lightning uses ",(0,i.jsx)(n.code,{children:"okapi"})," to provide more adaptability to the functions."]}),"\n",(0,i.jsx)(n.p,{children:"Thanks to Okapi, you can specify units of length and angles in different motion functions."}),"\n",(0,i.jsx)(n.p,{children:"For example, for Length you can use some of these units:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Unit"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Literal"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Meter"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_m"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Centimeter"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_cm"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Millimeter"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_mm"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Inch"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_in"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Foot"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_ft"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"tile"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_tile"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"And for Angles you can use:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Unit"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Literal"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Radian"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_rad"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Degree"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"_deg"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Check the ",(0,i.jsx)(n.a,{href:"https://okapilib.github.io/OkapiLib/md_docs_api_units.html",children:"okapi Units API"})," for more information."]}),"\n",(0,i.jsx)(n.h2,{id:"driving-straight-without-pid",children:"Driving straight without PID"}),"\n",(0,i.jsxs)(n.p,{children:["If you want to drive your robot to certain distance and velocity you can use the ",(0,i.jsx)(n.code,{children:"raw_drive_distance()"})," function."]}),"\n",(0,i.jsxs)(n.p,{children:["You just need to indicate the distance that you want to travel in ",(0,i.jsx)(n.code,{children:"inches"})," and indicating the velocity of your motors in ",(0,i.jsx)(n.code,{children:"RPM"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"This function simply sets the target for the motor, it does not block program execution until the movement finishes. That means, while the robot it is moving can do more functions."})}),"\n",(0,i.jsxs)(s.A,{groupId:"Tutorial_autonomous_routine_raw_distance",defaultValue:"_drive_forward",values:[{label:"Drive forward",value:"_drive_forward"},{label:"Drive backward",value:"_drive_backward"}],children:[(0,i.jsx)(o.A,{value:"_drive_forward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"void autonomous(){\r\n    my_chassis.raw_drive_distance(24,300); //Moving the robot 24 inches forward at 300 RPM.\r\n    pros::delay(3000); //When the robot reachead the target\r\n\r\n    my_chassis.raw_drive_distance(24_in,300); //Moving the robot 24 inches at the same velocity. \r\n    pros::delay(3000);\r\n\r\n    my_chassis.raw_drive_distance(1_tile,300); //Moving 1 tile (48 inches aprox) at the same velocity. \r\n    pros::delay(3000);\r\n}\n"})})}),(0,i.jsx)(o.A,{value:"_drive_backward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"void autonomous(){\r\n    my_chassis.raw_drive_distance(-24,300); //Moving the robot 24 inches backward at 300 RPM.\r\n    pros::delay(3000);\r\n\r\n    my_chassis.raw_drive_distance(-24_in,300); //Moving the robot 24 inches at the same velocity. \r\n    pros::delay(3000);\r\n\r\n    my_chassis.raw_drive_distance(-1_tile,300); //Moving 1 tile (48 inches aprox) at the same velocity.\r\n    pros::delay(3000); \r\n}\n"})})})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"It is important to consider that the function is not entirely precise, but it is useful when you want to drive a certain distance without worrying too much about precision. Additionally, there is nothing that guarantees the robot will drive completely straight, so achieving straight movement depends on your robot's construction."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"driving-straight-using-pid",children:"Driving straight using PID"}),"\n",(0,i.jsxs)(n.p,{children:["Using ",(0,i.jsx)(n.code,{children:"drive_distance()"})," you can drive the robot to a specified distance using PID controller and additionally control the heading of your robot using another dedicated ",(0,i.jsx)(n.code,{children:"PID"})," controller."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.strong,{children:["This motion function it is more accurate than ",(0,i.jsx)(n.code,{children:"raw_drive_distance()"})]}),"."]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.mdxAdmonitionTitle,{}),(0,i.jsx)(n.p,{children:"The function will block the program execution until it completes. Once finished, the program will resume and continue running subsequent lines of code."})]}),"\n",(0,i.jsxs)(n.h3,{id:"using-the-drive_pid-and-turn_pid",children:["Using the ",(0,i.jsx)(n.code,{children:"drive_pid"})," and ",(0,i.jsx)(n.code,{children:"turn_pid"})]}),"\n",(0,i.jsxs)(n.p,{children:["The perfomance of the functions depends in the tunning of the ",(0,i.jsx)(n.code,{children:"drive_pid"})," and ",(0,i.jsx)(n.code,{children:"turn_pid"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"drive_pid"})," controls the robot\xb4s velocity to travel the specified distance."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"turn_pid"})," controls the robot\xb4s orientation to keep your robot straight."]}),"\n"]}),"\n",(0,i.jsxs)(s.A,{groupId:"Tutorial_autonomous_routine_drive_distance",defaultValue:"_drive_forward",values:[{label:"Drive forward",value:"_drive_forward"},{label:"Drive backward",value:"_drive_backward"}],children:[(0,i.jsx)(o.A,{value:"_drive_forward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp" {10-13}',children:"void autonomous(){\r\n    //Setting the drive_pid\r\n    my_chassis.set_drive_constants(9, 0, 1.75, 250, 1, 0, 100);\r\n    my_chassis.set_drive_exit_conditions(.15, 250, 500);\r\n    \r\n    //Setting the turn_pid\r\n    my_chassis.set_turn_constants(1.75, 0, 0, 300, 1, 0, 0);\r\n    my_chassis.set_turn_exit_conditions(1, 100, 5000);\r\n    \r\n    //Driving forward\r\n    my_chassis.drive_distance(24,0); //Running 24 inches in a straight line at a 0-degree orientation.  \r\n    my_chassis.drive_distance(24_in,0); //Running 24 inches in a straight line at a 0-degree orientation.\r\n    my_chassis.drive_distance(1_tile,0);  //Running 1 tile in a straight line at a 0-degree orientation.  \r\n}\n"})})}),(0,i.jsx)(o.A,{value:"_drive_backward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp" {10-13}',children:"void autonomous(){\r\n    //Setting the drive_pid\r\n    my_chassis.set_drive_constants(9, 0, 1.75, 250, 1, 0, 100);\r\n    my_chassis.set_drive_exit_conditions(.15, 250, 500);\r\n    \r\n    //Setting the turn_pid\r\n    my_chassis.set_turn_constants(1.75, 0, 0, 300, 1, 0, 0);\r\n    my_chassis.set_turn_exit_conditions(1, 100, 5000);\r\n    \r\n    //Driving backwards\r\n    my_chassis.drive_distance(-24,0); //Running 24 inches in a straight line at a 0-degree orientation.  \r\n    my_chassis.drive_distance(-24_in,0); //Running 24 inches in a straight line at a 0-degree orientation.\r\n    my_chassis.drive_distance(-1_tile,0);  //Running 1 tile in a straight line at a 0-degree orientation.  \r\n}\n"})})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"turning",children:"Turning"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"turn_absolute()"})," Makes the robot turn to a certain absolute orientation."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{6-9} title="main.cpp"',children:"void autonomous(){\r\n    //Tunning turn_pid\r\n    my_chassis.set_turn_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_turn_exit_conditions(1,350,2000); \r\n   \r\n    my_chassis.turn_absolute(90_deg);\r\n    my_chassis.turn_absolute(180_deg); \r\n    my_chassis.turn_absolute(270); //turning 270 degrees.   \r\n    my_chassis.turn_absolute(1_rad); //turning to 1 radian (for some reason?). \r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["On the other hand, you can use ",(0,i.jsx)(n.code,{children:"turn_relative"})," to make your robot turn a certain number of degrees. Use a positive value if the robot needs to turn right, or a negative value if the robot needs to turn left."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{6-9} title="main.cpp"',children:"void autonomous(){\r\n    //Tunning turn_pid\r\n    my_chassis.set_turn_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_turn_exit_conditions(1,350,2000); \r\n   \r\n    my_chassis.turn_relative(turn_controller,180_deg); //turning 180 degrees. \r\n    my_chassis.turn_relative(turn_controller,90_deg); //turning 90 degrees, current heading 270. \r\n    my_chassis.turn_relative(turn_controller,-90_deg); //turning -90 degrees, current heading 180.\r\n}\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The turning direction is determinated depending of which direction means less travel."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"driving-and-turning-example",children:"Driving and turning example"}),"\n",(0,i.jsx)(n.p,{children:"You can combine the driving and turning functions."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{11-21} title="main.cpp"',children:"void autonomous(){\r\n    //Setting the drive_pid\r\n    my_chassis.set_drive_constants(9, 0, 1.75, 250, 1, 0, 100);\r\n    my_chassis.set_drive_exit_conditions(.15, 250, 500);\r\n\r\n    //Tunning turn_pid\r\n    my_chassis.set_turn_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_turn_exit_conditions(1,350,2000); \r\n    \r\n    //Making a square  of 24 in x 24 in []\r\n    my_chassis.drive_distance(24_in,0_deg); //DRIVING 24 inches \u2191\r\n    my_chassis.turn_absolute(90_deg); //Turning at 90 degrees orientation \u2192\r\n\r\n    my_chassis.drive_distance(24_in,90_deg); //Driving 24 inches \u2192\r\n    my_chassis.turn_absolute(180_deg); //Turning at 180 degrees orientation  \u2193\r\n\r\n    my_chassis.drive_distance(24_in,180_deg);  //Driving 24 inches \u2193\r\n    my_chassis.turn_absolute(270_deg); //Turning at 270 degrees orientation  \u2190\r\n\r\n    my_chassis.drive_distance(24_in,270_deg); //Driving 24 inches \u2190\r\n    my_chassis.turn_absolute(360_deg); //Turning at 360 degrees orientation \u2191 \r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"swing-turns",children:"Swing turns"}),"\n",(0,i.jsxs)(n.p,{children:["A ",(0,i.jsx)(n.em,{children:"swing"})," turn is when the robot turns to a certain orientation but blocking one side of the drive train, making a ",(0,i.jsx)(n.em,{children:"swing"}),"."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The turning direction is determinated depending of which direction means less travel."})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"void autonomous(){\r\n    //Tunning swing_pid\r\n    my_chassis.set_swing_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_swing_exit_conditions(1,350,2000); \r\n\r\n    //Making a turn blocking the right side of the chassis.\r\n    //to 90 degrees orientation. \r\n    my_chassis.swing_turn_absolute (RIGHT_SWING, 90_deg); \r\n    \r\n    //Making a turn blocking the left side of the chassis. \r\n    //to 0 degrees orientation. \r\n    my_chassis. swing_turn_absolute (LEFT_SWING, 0_deg);\r\n   \r\n    //Making a turn blocking the right side of the chassis.\r\n    //turn 90 degrees to the right.  \r\n    my_chassis.swing_turn_relative (RIGHT_SWING, 90_deg); \r\n    \r\n    //Making a turn blocking the right side of the chassis. \r\n    //turn 90 degrees to the right\r\n    my_chassis. swing_turn_relative (RIGHT_SWING, 90_deg); \r\n\r\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"using-trapezoidal-profile",children:"Using Trapezoidal profile"}),"\n",(0,i.jsx)(n.p,{children:"A trapezoidal profile is a type of motion control trajectory. This method is commonly used in robotics and automation to ensure smooth and controlled movements, minimizing sudden jerks and mechanical stress on the system."}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://www.pmdcorp.com/resources/type/articles/get/mathematics-of-motion-control-profiles-article",children:"Click here to get more information about trapezoidal profile."})}),"\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.code,{children:"lightning"})," you are able to create trapezoidal profilers, which provide good performance when traveling distances."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"lightning::TrapezoidalProfile profile (5,1);  // Max velocity: 5 inches/seconds, Max accel: 1 inches/seconds^2 \r\nvoid autonomous(){\r\n    profile.update(48,.01); // 48 inches , .01 sec\r\n\r\n    //The robot would travel 48 inches using the trapezoidal profile. \r\n    my_chassis.move_with_motion_profile(test_profile);\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check the ",(0,i.jsx)(n.a,{href:"/docs/Documentation/Trapezoidal",children:"TrapezoidalProfile Documentation"})," and the ",(0,i.jsx)(n.a,{href:"/docs/Tutorials/Using_Trapezoidal_profilers",children:"Using Trapezoidal profilers tutorial"})," for more information."]}),"\n",(0,i.jsxs)(n.p,{children:["You can see the ",(0,i.jsx)(n.code,{children:"TrapezoidalProfile"})," in action in this ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=WZaXgi8o368",children:"video"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"driving-to-a-point",children:"Driving to a point"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["You need to have odometry, using a odometry configuration that lightning supports, check the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/Tutorials/Declaring_your_chassis",children:"Declaring your chassis tutorial"})})," to get more information ."]})}),"\n",(0,i.jsxs)(n.p,{children:["Drives the robot from a starting point to a target point. The robot ",(0,i.jsx)(n.strong,{children:"MUST"})," to be facing the target point with the front or back side of the chassis."]}),"\n",(0,i.jsxs)(s.A,{groupId:"Tutorial_autonomous_routine_drive_point",defaultValue:"_drive_forward",values:[{label:"Drive forward",value:"_drive_forward"},{label:"Drive backward",value:"_drive_backward"}],children:[(0,i.jsx)(o.A,{value:"_drive_forward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{13} title="main.cpp"',children:"void autonomous(){\r\n    //Setting the drive_pid\r\n    my_chassis.set_drive_constants(9, 0, 1.75, 250, 1, 0, 100);\r\n    my_chassis.set_drive_exit_conditions(.15, 250, 500);\r\n\r\n    //Tunning turn_pid\r\n    my_chassis.set_turn_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_turn_exit_conditions(1,350,2000); \r\n    \r\n    //The robot is in (0_in,0_in) and we want to go to (0_in,24_in)\r\n    //The robot is facing the target point, so we can use the function. \r\n    //we set false, because the robot would run forward. \r\n    my_chassis.drive_to_point({0_in,24_in},false); //USING THE my_chassis drive and turn pid! \r\n}\n"})})}),(0,i.jsx)(o.A,{value:"_drive_backward",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{13} title="main.cpp"',children:"void autonomous(){\r\n    //Setting the drive_pid\r\n    my_chassis.set_drive_constants(9, 0, 1.75, 250, 1, 0, 100);\r\n    my_chassis.set_drive_exit_conditions(.15, 250, 500);\r\n\r\n    //Tunning turn_pid\r\n    my_chassis.set_turn_constants(5 , .001 , 1, 450, 1, 25,50);  \r\n    my_chassis.set_turn_exit_conditions(1,350,2000); \r\n    \r\n     //The robot is in (0_in,0_in) and we want to go to (0_in,-24_in)\r\n    //The robot is facing the target point with the back side of the robot, so we can use the function. \r\n    //we set true, because the robot would run backward to reach the point. \r\n    my_chassis.drive_to_point({0_in,-24_in},true); //USING THE my_chassis drive and turn pid! \r\n}\n"})})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"following-a-path",children:"Following a path"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["You need to have odometry, using a odometry configuration that lightning supports,check the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/Tutorials/Declaring_your_chassis",children:"Declaring your chassis tutorial"})})," to get more information ."]})}),"\n",(0,i.jsxs)(n.p,{children:["You can create a pre-computated path and make that you robot follow it using ",(0,i.jsx)(n.code,{children:"follow_path()"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"This works using pure pursuit, path planning and motion profiling. During the 2023-2024 Vex U season, our team used the same function and achieved great results."}),"\n",(0,i.jsxs)(n.p,{children:["Videos of our robot in action can be found ",(0,i.jsx)(n.a,{href:"https://youtu.be/wV4qQ4udcdQ",children:"here"}),"."]}),"\n",(0,i.jsxs)(s.A,{groupId:"Tutorial_autonomous_follow_path",defaultValue:"_example_1",values:[{label:"Example 1",value:"_example_1"},{label:"Example 2",value:"_example_2"}],children:[(0,i.jsx)(o.A,{value:"_example_1",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{24} title="main.cpp"',children:"void autonomous(){\r\n //Creating the path\r\n  lightning::Path corredor_path(\r\n  \r\n  // X coordinates\r\n  {my_chassis.get_x(), 12, 11.55, 11.55, 12.15,5.25, .61, -8.34, 15.23, -19.57},\r\n  \r\n  // Y coordinates \r\n  {my_chassis.get_y(), 16.91, 20, 40, 80, 109.21,111.16, 116.25, 115.25, 115.25},\r\n  \r\n  ////going backwards ? True if you robot needs to go backward and False if you robot need to go forward. \r\n  true,\r\n  \r\n  6 //The space that would exist between each point for the injection method. \r\n\r\n  );\r\n  \r\n  //You must to use this functions\r\n  corredor_path.upgrade(); //Upgrading the path\r\n  corredor_path.set_max_lineal_velocity(10); //Setting the maximum velocity in inches/second\r\n  corredor_path.make_calcs(1.75); //how slow you want the robot to go around turns  (aroud 1-5). \r\n\r\n  pros::delay(20); //a delay to make all calculations\r\n  my_chassis.follow_path(corredor_path, 18); //The path that we want to follow (corredor_path), \r\n  //and setting a look ahead distance of 18. \r\n}\n"})})}),(0,i.jsx)(o.A,{value:"_example_2",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{35} title="main.cpp"',children:"void autonomous(){\r\nlightning::Path pick_triball(                     //-27.80\r\n\r\n// X coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_x(), -19.34, -19.89, -25, -26.72},\r\n\r\n// Y coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_y(), 108.03,99.11,85.13,69.5}, \r\n\r\n////going backwards ? True if you robot needs to go backward and False if you robot need to go forward. \r\nfalse, \r\n\r\n//The space that would exist between each point for the injection method. \r\n3\r\n\r\n);\r\n\r\n //You must to use this functions\r\npick_triball.upgrade();    //Upgrading the path                                    \r\npick_triball.set_max_lineal_velocity(14); //Setting the maximum velocity in inches/second\r\npick_triball.make_calcs(1.5); //how slow you want the robot to go around turns  (aroud 1-5). \r\n\r\npros::delay(20);\r\n\r\n//Tunning pid controller\r\nfloat limit_integral = 200 / .001250;\r\nmy_chassis.set_turn_constants(1.15, 0, 0, 550, 1, 0, 0);\r\nmy_chassis.set_turn_exit_conditions(1, 500, 8000);\r\n\r\nmy_chassis.set_drive_constants(6, 0.00155, 10, 500, 1, 100, 300);\r\nmy_chassis.set_drive_exit_conditions(.15, 250, 1000);\r\n\r\nintaker.move_voltage(12000); //making some another functions \r\n\r\nmy_chassis.follow_path(pick_triball,25); //Following the path (pick_triball), \r\n//setting a look ahead distance of 25.  \r\n}\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"To see more information about, please check:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Path Documentation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/Documentation/Path",children:"Lightning Path Documentation"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Using Paths Tutorial"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/Tutorials/Using_Paths",children:"Path Tutorial"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"LightningPlanner"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/docs/Python_utilities/LightningPlanner",children:"Lightning Planner"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Pure Pursuit"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://la.mathworks.com/help/nav/ug/pure-pursuit-controller.html",children:"Pure pursuit and LookAheadDistance"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://wiki.purduesigbots.com/software/control-algorithms/basic-pure-pursuit",children:"Basic Pure Pursuit"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"multitasking",children:"Multitasking"}),"\n",(0,i.jsxs)(n.p,{children:["You may want your robot to perform different actions while following a path. For example, you might want to activated a pneumatic actuator at the same time that your robot is following a ",(0,i.jsx)(n.code,{children:"path"}),". This can make your routine more compact and efficient."]}),"\n",(0,i.jsx)(n.h4,{id:"simple-functions",children:"Simple functions"}),"\n",(0,i.jsxs)(n.p,{children:["Suppose you want to activate the intake mechanism from the beginning until the end of the path travel. Although it may seem straightforward to simply activate the intake, the task involves ensuring the intake mechanism is activated before executing the ",(0,i.jsx)(n.code,{children:"follow_path()"})," function."]}),"\n",(0,i.jsx)(n.p,{children:"The code would look some like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'{35} title="main.cpp"',children:"void autonomous(){\r\nlightning::Path pick_triball(                     //-27.80\r\n\r\n// X coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_x(), -19.34, -19.89, -25, -26.72},\r\n\r\n// Y coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_y(), 108.03,99.11,85.13,69.5}, \r\n\r\n////going backwards ? True if you robot needs to go backward and False if you robot need to go forward. \r\nfalse, \r\n\r\n//The space that would exist between each point for the injection method. \r\n3\r\n\r\n);\r\n\r\n //You must to use this functions\r\npick_triball.upgrade();    //Upgrading the path                                    \r\npick_triball.set_max_lineal_velocity(14); //Setting the maximum velocity in inches/second\r\npick_triball.make_calcs(1.5); //how slow you want the robot to go around turns  (aroud 1-5). \r\n\r\npros::delay(20);\r\n\r\nintaker.move_voltage(12000); //activating my intaker\r\n\r\nmy_chassis.follow_path(pick_triball,25); //Following the path (pick_triball), \r\n//setting a look ahead distance of 25.  \r\n\r\nintaker.stop();  //stopping the intaker. \r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In this aproach the intake activation would run during all the execution of the ",(0,i.jsx)(n.code,{children:"path"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"However, if you want to create a more complex function, it is necessary to make some adjustments to the code."}),"\n",(0,i.jsx)(n.h4,{id:"more-complex-functions",children:"More complex functions"}),"\n",(0,i.jsxs)(n.p,{children:["For example, during the ",(0,i.jsx)(n.code,{children:"Over Under"})," season, our team programmed the robot to follow a path while simultaneously activating and deactivating different pneumatic actuators at specific points along the path. This made our autonomous routine more efficient and competitive."]}),"\n",(0,i.jsxs)(n.p,{children:["You can found a video of our autonomous routine in action ",(0,i.jsx)(n.a,{href:"https://youtu.be/LpFiJdZ04_4",children:"here."})]}),"\n",(0,i.jsx)(n.h5,{id:"well-and-how-i-can-do-the-same-",children:"Well, and how i can do the same \ud83e\udd14?"}),"\n",(0,i.jsx)(n.p,{children:"Well that is a easy job!"}),"\n",(0,i.jsxs)(n.p,{children:["The first thing to considered is that a ",(0,i.jsx)(n.code,{children:"Path"})," contains ",(0,i.jsx)(n.strong,{children:"points"}),". Each point correspond an ",(0,i.jsx)(n.strong,{children:"path index"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For example if our path is composed of the following points:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"//This is not a code, is just a visual representation: \r\nexample_path=\r\n    first point ( x: 0, y: 24 )\r\n    second point ( x: 48, y: 24 )\r\n    third point ( x: 48, y: 0 )\r\n    fourth point ( x: 0, y: 0 )\r\n\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Each point correspond an specific ",(0,i.jsx)(n.strong,{children:"index"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"//This is not a code, is just a visual representation: \r\nexample_path.index[0] = first point ( x: 0, y: 24 )\r\nexample_path.index[1] = second point ( x: 48, y: 24 )\r\nexample_path.index[2] = third point ( x: 48, y: 0 )\r\nexample_path.index[3] = fourth point ( x: 0, y: 0 )\n"})}),"\n",(0,i.jsx)(n.p,{children:"After considered that, it is more easy to start programming the logic."}),"\n",(0,i.jsxs)(n.p,{children:["We can use the ",(0,i.jsx)(n.code,{children:"get_current_index()"})," function. This functions allows you to get the current path index that our robot is travelling in real time."]}),"\n",(0,i.jsx)(n.p,{children:"The aproach is creating a task that would check the current path index that the robot is navigating. This task will command different\r\nactions or functions depending on the index."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create the function"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"void path_actions(void*){\r\n  while (1) {        \r\n    //When the robot is in the index 5 = point 6. \r\n    if(my_chassis.get_current_index()==5){\r\n        //Do the following \r\n        activate_pneumatics(); \r\n    }\r\n    \r\n    //When the robot is in the index 11 = point 12. \r\n    if(my_chassis.get_current_index()==11){\r\n      //Do the following\r\n      activate_intaker();\r\n    }\r\n    \r\n    //When the robot is in the index 13 = point 14. \r\n    if(my_chassis.get_current_index()==13){\r\n      //Do the following\r\n      close_pneumatics(); \r\n    }\r\n    \r\n    //MAYBE CHECK THE INDEX AND OTHER THINGS\r\n     //When the robot is in the index 13 = point 14. \r\n    if(my_chassis.get_current_index()==16 && we_have_time()){\r\n      //Do other thing\r\n    }\r\n\r\n    else{\r\n        my_chassis.stop(); \r\n    }\r\n\r\n    // AND SO ON ......\r\n    \r\n  }\r\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Have a ",(0,i.jsx)(n.code,{children:"TaskManager"})," declared"]}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"lightning::TaskManager autonomous_task_manager; //Our task manager \r\n\r\nvoid autonomous(){\r\n}\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create and run the task"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:'lightning::Path pick_triball(                    \r\n// X coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_x(), -19.34, -19.89, -25, -26.72},\r\n\r\n// Y coordinates. (Its recommended that the first point be your current position)\r\n{my_chassis.get_y(), 108.03,99.11,85.13,69.5}, \r\n\r\n////going backwards ? True if you robot needs to go backward and False if you robot need to go forward. \r\nfalse, \r\n\r\n//The space that would exist between each point for the injection method. \r\n3\r\n\r\n);\r\n\r\n //You must to use this functions\r\npick_triball.upgrade();    //Upgrading the path                                    \r\npick_triball.set_max_lineal_velocity(14); //Setting the maximum velocity in inches/second\r\npick_triball.make_calcs(1.5); //how slow you want the robot to go around turns  (aroud 1-5). \r\n\r\npros::delay(20);\r\n\r\n//WHILE THE ROBOT IS FOLLOWING THE PATH, THE ROBOT WOULD EXECUTE THE path_actions FUNCTION. \r\nautonomous_task_manager.start_task("MULTITASK_ACTIONS_PATH",path_actions)\r\nmy_chassis.follow_path(pick_triball,25); //Following the path (pick_triball), \r\n//setting a look ahead distance of 25.  \n'})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kill the task"}),"\r\nAfter, the robot finished the ",(0,i.jsx)(n.code,{children:"path"}),", the ",(0,i.jsx)(n.code,{children:"task"})," is not longer needed."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",metastring:'title="main.cpp"',children:'\r\nautonomous_task_manager.start_task("MULTITASK_ACTIONS_PATH",path_actions)\r\nmy_chassis.follow_path(pick_triball,25);\r\npros::delay(10); \r\nautonomous_task_manager.kill_task("MULTITASK_ACTIONS_PATH");\n'})}),"\n",(0,i.jsxs)(n.p,{children:["If you have doubts please check the ",(0,i.jsx)(n.a,{href:"/docs/Tutorials/Using_TaskManager_Class",children:"How to create tasks tutorial."})," and the ",(0,i.jsx)(n.a,{href:"/docs/Documentation/TaskManager",children:"TaskManager Documentation"})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"congratulations-",children:"Congratulations! \ud83c\udf89"}),"\n",(0,i.jsx)(n.p,{children:"With this simple tutorial you are able to program an effective autonomous routine."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var i=t(4164);const r={tabItem:"tabItem_Ymn6"};var s=t(4848);function o(e){let{children:n,hidden:t,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,o),hidden:t,children:n})}},1470:(e,n,t)=>{t.d(n,{A:()=>b});var i=t(6540),r=t(4164),s=t(3104),o=t(6347),a=t(205),l=t(7485),c=t(1682),d=t(679);function h(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:r}}=e;return{value:n,label:t,attributes:i,default:r}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const r=(0,o.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(s),(0,i.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=u(e),[o,l]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:s}))),[c,h]=g({queryString:t,groupId:r}),[m,_]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,d.Dv)(t);return[r,(0,i.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),x=(()=>{const e=c??m;return p({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{x&&l(x)}),[x]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),_(e)}),[h,_,s]),tabValues:s}}var _=t(2303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(4848);function v(e){let{className:n,block:t,selectedValue:i,selectValue:o,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),r=a[t].value;r!==i&&(c(n),o(r))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>l.push(e),onKeyDown:h,onClick:d,...s,className:(0,r.A)("tabs__item",x.tabItem,s?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:r}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===r));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=m(e);return(0,f.jsxs)("div",{className:(0,r.A)("tabs-container",x.tabList),children:[(0,f.jsx)(v,{...n,...e}),(0,f.jsx)(j,{...n,...e})]})}function b(e){const n=(0,_.A)();return(0,f.jsx)(y,{...e,children:h(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);