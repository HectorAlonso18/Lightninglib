"use strict";(self.webpackChunklightning_docs=self.webpackChunklightning_docs||[]).push([[9923],{3890:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var i=n(4848),o=n(8453);const a={sidebar_label:"Using Paths",sidebar_position:8},r="How to use Paths?",s={id:"Tutorials/Using_Paths",title:"How to use Paths?",description:"Introduction",source:"@site/docs/Tutorials/Using_Paths.md",sourceDirName:"Tutorials",slug:"/Tutorials/Using_Paths",permalink:"/Lightninglib/docs/Tutorials/Using_Paths",draft:!1,unlisted:!1,editUrl:"https://github.com/HectorAlonso18/Lightninglib/tree/main/docs/Tutorials/Using_Paths.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_label:"Using Paths",sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Using Trapezoidal profilers",permalink:"/Lightninglib/docs/Tutorials/Using_Trapezoidal_profilers"},next:{title:"Python utilities \ud83d\udc0d ",permalink:"/Lightninglib/docs/category/python-utilities--"}},h={},l=[{value:"Introduction",id:"introduction",level:2},{value:"What is a path?",id:"what-is-a-path",level:2},{value:"Coding",id:"coding",level:2},{value:"Creating a path",id:"creating-a-path",level:3},{value:"Upgrading the path",id:"upgrading-the-path",level:3},{value:"Making the math \ud83e\udd13",id:"making-the-math-",level:3},{value:"Setting the maximum velocity",id:"setting-the-maximum-velocity",level:4},{value:"Making the calcs",id:"making-the-calcs",level:4},{value:"Following the path",id:"following-the-path",level:3},{value:"Going backwards?",id:"going-backwards",level:3},{value:"Printing",id:"printing",level:3},{value:"Using additional functions",id:"using-additional-functions",level:3},{value:"Results",id:"results",level:2},{value:"You finished the tutorial \ud83c\udf93!",id:"you-finished-the-tutorial-",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"how-to-use-paths",children:"How to use Paths?"}),"\n",(0,i.jsx)(t.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(t.p,{children:"Commonly, the robot's motion during autonomous routines is simple."}),"\n",(0,i.jsx)(t.p,{children:"For example:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"Drive a certain distance."}),"\n",(0,i.jsx)(t.li,{children:"Turn a certain number of degrees."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Driving and turning are fundamental to programming an autonomous routine. Both motion functions can be very accurate; however, when we use both functions, you'll notice that the robot needs to stop to follow the next instruction. If the robot needs to follow a more complicated routine, it will need to make a lot of simple movements, wasting more time during the autonomous period. We need to remember that time is valuable."}),"\n",(0,i.jsx)(t.h2,{id:"what-is-a-path",children:"What is a path?"}),"\n",(0,i.jsxs)(t.p,{children:["To program more complex motion functions, we can create and plan ",(0,i.jsx)(t.code,{children:"paths"}),". A ",(0,i.jsx)(t.code,{children:"path"})," is a series of waypoints, where each point is defined by its position in (X, Y) format. Each point serves as a target that we want the robot to follow."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"coding",children:"Coding"}),"\n",(0,i.jsxs)(t.p,{children:["Creating and using paths is possibly with ",(0,i.jsx)(t.code,{children:"Lightning"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["The logic behind the programming of this class is based in the ",(0,i.jsx)(t.a,{href:"https://www.chiefdelphi.com/t/paper-implementation-of-the-adaptive-pure-pursuit-controller/166552",children:"Paper: Implementation of the Adaptive Pure Pursuit Controller"})," by ",(0,i.jsx)(t.strong,{children:"DAWGMA"})," FRC team."]}),"\n",(0,i.jsx)(t.h3,{id:"creating-a-path",children:"Creating a path"}),"\n",(0,i.jsxs)(t.p,{children:["You can create a path using the ",(0,i.jsx)(t.code,{children:"Path"})," constructor. This constructor requires the waypoints and other important parameters."]}),"\n",(0,i.jsxs)(t.p,{children:["Don\u2019t worry about adding too many waypoints; try to add just enough to clearly define the path you want the robot to follow. The ",(0,i.jsx)(t.a,{href:"/docs/Documentation/Path",children:"Path class"})," has different functions that upgrade your path, increasing the mount and qualitfy of points."]}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["The units for the x and y coordinates ",(0,i.jsx)(t.strong,{children:"must to be in inches"}),"."]})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'title="main.cpp"',children:"lightning::Path goal_path (\r\n    {0,0,24,48}, //X: A vector that includes the x coordinates of each point.\r\n    {0,24,48,64}, //Y: A vector that includes the y coordinates of each point.\r\n    false, //A boolean flag indicating if the path should be reversed. True if reversed\r\n    3 //The space that would exist between each point for the injection method\r\n    ); \n"})}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"Is recommended that the first point of your path be the same as the current robot location."})}),"\n",(0,i.jsxs)(t.p,{children:["Also you can use the ",(0,i.jsx)(t.a,{href:"/docs/Python_utilities/LightningPlanner",children:"Lightning Planner utility"})," to create your path more easily.Planning your autonomous routine directly from your computer, eliminating the need for field measurements."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Lightning Planner",src:n(9041).A+"",width:"702",height:"737"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"upgrading-the-path",children:"Upgrading the path"}),"\n",(0,i.jsxs)(t.p,{children:["Using the ",(0,i.jsx)(t.code,{children:"update()"})," function, we can have an upgraded form of any ",(0,i.jsx)(t.code,{children:"Path"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{3} title="main.cpp"',children:"lightning::Path goal_path ({0,0,24,48}, {0,24,48,64}, false, 3);\r\nvoid autonomous(){\r\n    goal_path.upgrade(); \r\n} \n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"What is important to upgrade my path?"})}),"\n",(0,i.jsx)(t.p,{children:"The path created may have sharp corners, making it more difficult for your robot to follow. Upgrading the path allows the robot to follow it more quickly and precisely."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"normal path vs upgraded path",src:n(6604).A+"",width:"1219",height:"419"})}),"\n",(0,i.jsx)(t.p,{children:"As you can see, The normal path has been injected with additional points and optimizaded."}),"\n",(0,i.jsxs)(t.p,{children:["The amount of inyected points it depends on the ",(0,i.jsx)(t.code,{children:"_spacing"})," that was declared in the constructor."]}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"making-the-math-",children:"Making the math \ud83e\udd13"}),"\n",(0,i.jsx)(t.p,{children:"We have planned our path, but we need to perform some mathematical calculations to complete the work."}),"\n",(0,i.jsxs)(t.p,{children:["This process is known as the ",(0,i.jsx)(t.strong,{children:"Motion Profile"}),". Here, we calculate the desired linear velocity that our robot needs to achieve in order to follow the path accurately."]}),"\n",(0,i.jsx)(t.p,{children:"The algorithms used in this process calculate the desired velocity based on the maximum linear velocity we set and the curvature of the path. This ensures that when the robot encounters a curved segment of the path, it will slow down appropriately to navigate the curve effectively."}),"\n",(0,i.jsx)(t.h4,{id:"setting-the-maximum-velocity",children:"Setting the maximum velocity"}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsx)(t.p,{children:"Is important to set the maximum velocity  in (inches/second) units."})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{4} title="main.cpp"',children:"lightning::Path goal_path ({0,0,24,48}, {0,24,48,64}, false, 3);\r\nvoid autonomous(){\r\n    goal_path.upgrade(); \r\n    goal_path.set_max_lineal_velocity(10); \r\n} \n"})}),"\n",(0,i.jsx)(t.h4,{id:"making-the-calcs",children:"Making the calcs"}),"\n",(0,i.jsxs)(t.p,{children:["Once the maximum velocity is setted is time to use the ",(0,i.jsx)(t.code,{children:"make_calcs(k)"})," function.\r\nWhere k it is constant, how slow you want the robot to go around turns. (aroud 1-5)."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{5} title="main.cpp"',children:"lightning::Path goal_path ({0,0,24,48}, {0,24,48,64}, false, 3);\r\nvoid autonomous(){\r\n    goal_path.upgrade(); \r\n    goal_path.set_max_lineal_velocity(10); \r\n    goal_path.make_calcs(1.15);\r\n    pros::delay(20); //Giving some time to make the calculations.  \r\n} \n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"following-the-path",children:"Following the path"}),"\n",(0,i.jsxs)(t.p,{children:["After we created the path and the math calculations was made. You can command you robot to follow the path using ",(0,i.jsx)(t.code,{children:"follow_path()"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["The functions uses a ",(0,i.jsx)(t.a,{href:"https://wiki.purduesigbots.com/software/control-algorithms/basic-pure-pursuit",children:"pure pursuit"})," algoritm to navigate the Path."]}),"\n",(0,i.jsx)(t.p,{children:"For this function you need to provide:"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"Path"})," that you want to follow."]}),"\n",(0,i.jsxs)(t.li,{children:["The ",(0,i.jsx)(t.code,{children:"LookAheadDistance"}),". Check the next ",(0,i.jsx)(t.a,{href:"https://la.mathworks.com/help/nav/ug/pure-pursuit-controller.html",children:"site"})," for more information about it."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{7} title="main.cpp"',children:"lightning::Path goal_path ({0,0,24,48}, {0,24,48,64}, false, 3);\r\nvoid autonomous(){\r\n    goal_path.upgrade(); \r\n    goal_path.set_max_lineal_velocity(10); \r\n    goal_path.make_calcs(1.15);\r\n    pros::delay(20); //Giving some time to make the calculations.\r\n    my_chassis.follow_path(goal_path,18); //Following goal_path with a lookaheadistance of 18 inches.    \r\n} \n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"going-backwards",children:"Going backwards?"}),"\n",(0,i.jsx)(t.p,{children:"During path navigation, the robot will maintain its current direction. If you want the robot to follow the path while moving backward, make sure to set the _reverse parameter to true in the constructor."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{4} title="main.cpp"',children:"lightning::Path goal_path (\r\n    {0,0,24,48}, //X: A vector that includes the x coordinates of each point.\r\n    {0,24,48,64}, //Y: A vector that includes the y coordinates of each point.\r\n    true, //A boolean flag indicating if the path should be reversed. True if reversed\r\n    3 //The space that would exist between each point for the injection method\r\n    ); \n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"printing",children:"Printing"}),"\n",(0,i.jsxs)(t.p,{children:["You can print in the integrated terminal the waypoints of your ",(0,i.jsx)(t.code,{children:"Path"})," using the ",(0,i.jsx)(t.code,{children:"std::ostream<<"})," operator."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cpp",metastring:'{6} title="main.cpp"',children:"lightning::Path goal_path ({0,0,24,48}, {0,24,48,64}, false, 3);\r\nvoid autonomous(){\r\n    std::cout<<goal_path; //Printing the normal path. \r\n    goal_path.upgrade(); \r\n    goal_path.set_max_lineal_velocity(10); \r\n    goal_path.make_calcs(1.15);\r\n    pros::delay(20); //Giving some time to make the calculations.\r\n    std::cout<<goal_path; //Printing the upgraded path \r\n} \n"})}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h3,{id:"using-additional-functions",children:"Using additional functions"}),"\n",(0,i.jsx)(t.p,{children:"There are additional functions that Lightning doesn\u2019t use for path following but might be useful if you want to develop your own path-following method."}),"\n",(0,i.jsx)(t.p,{children:"These additional functions are:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"calc_target_angular_velocities()"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"get_target_angular_velocities()"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"get_target_angular_velocity_at()"})}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"These functions are designated to calculate and manage the target angular velocity in each point."}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"results",children:"Results"}),"\n",(0,i.jsxs)(t.p,{children:["During the Over Under Season, our team ",(0,i.jsx)(t.code,{children:"ITESM1"})," achieved outstanding performance by using paths, significantly improving our autonomous routines."]}),"\n",(0,i.jsx)(t.p,{children:"We found that using paths allow us to program more efficient autonomous routines."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"ITESM1 OVER UNDER Worlds Autonomous Routine"})}),"\n",(0,i.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/hosBW9l6dMY",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.h2,{id:"you-finished-the-tutorial-",children:"You finished the tutorial \ud83c\udf93!"}),"\n",(0,i.jsx)(t.p,{children:"You finished the tutorial! Now you can start using Paths in your code."}),"\n",(0,i.jsxs)(t.p,{children:["For more information check the ",(0,i.jsx)(t.a,{href:"/docs/Documentation/Path",children:"Path Documentation."})]})]})}function d(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},9041:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/LPlanner_teaser_field-36d9c90e88073ccb3b6bfab41e206a27.png"},6604:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/path_upgrade_method-7a19815e06cd20353bd227d12aaa3c29.png"},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var i=n(6540);const o={},a=i.createContext(o);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);